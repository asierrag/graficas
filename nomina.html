<div style="display:flex; align-items:center; justify-content:center; font-family:sans-serif;">
  <canvas id="donutChart" width="300" height="300"></canvas>

  <div style="margin-left: 30px;">
    <ul style="list-style:none; padding:0; font-size:14px;">
      <li><span style="color:#4A90E2;">■</span> Administración: 32%</li>
      <li><span style="color:#00CFC1;">■</span> ETDH: 2%</li>
      <li><span style="color:#F9E44C;">■</span> Cibercolegio: 17%</li>
      <li><span style="color:#FF7A59;">■</span> Nómina docente: 49%</li>
    </ul>
  </div>

  <script>
    const data = [
      { label: "Administración", value: 32, color: "#4A90E2" },
      { label: "ETDH", value: 2, color: "#00CFC1" },
      { label: "Cibercolegio", value: 17, color: "#F9E44C" },
      { label: "Nómina docente", value: 49, color: "#FF7A59" }
    ];

    const canvas = document.getElementById('donutChart');
    const ctx = canvas.getContext('2d');
    const centerX = canvas.width / 2;
    const centerY = canvas.height / 2;
    const radius = 120;
    const innerRadius = 70;

    const total = data.reduce((sum, d) => sum + d.value, 0);

    let currentAngle = -0.5 * Math.PI;
    let i = 0;

    function drawSegment(start, end, color) {
      ctx.beginPath();
      ctx.arc(centerX, centerY, radius, start, end);
      ctx.arc(centerX, centerY, innerRadius, end, start, true);
      ctx.closePath();
      ctx.fillStyle = color;
      ctx.fill();
    }

    function drawText(percent, angle) {
      const r = (radius + innerRadius) / 2;
      const x = centerX + Math.cos(angle) * r;
      const y = centerY + Math.sin(angle) * r + 5;
      ctx.fillStyle = "#fff";
      ctx.font = "bold 14px sans-serif";
      ctx.textAlign = "center";
      ctx.fillText(`${percent}%`, x, y);
    }

    function animateSegment(d, start, end, callback) {
      const steps = 30;
      let step = 0;
      const angleDiff = end - start;

      function stepDraw() {
        const currentEnd = start + angleDiff * (step / steps);
        drawSegment(start, currentEnd, d.color);
        step++;
        if (step <= steps) {
          requestAnimationFrame(stepDraw);
        } else {
          const midAngle = start + angleDiff / 2;
          drawText(d.value, midAngle);
          callback();
        }
      }
      stepDraw();
    }

    function drawChart() {
      if (i >= data.length) return;
      const d = data[i];
      const angle = (d.value / total) * 2 * Math.PI;
      const start = currentAngle;
      const end = start + angle;
      animateSegment(d, start, end, () => {
        currentAngle = end;
        i++;
        drawChart();
      });
    }

    drawChart();
  </script>
</div>
